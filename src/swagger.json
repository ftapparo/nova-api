{
  "openapi": "3.0.1",
  "info": {
    "title": "NOVA-API",
    "description": "API de serviços para condomínio Nova Residence Quintas das Paineiras.",
    "version": "2.0.0"
  },
  "tags": [
    {
      "name": "Monitoramento",
      "description": "Verificação de status e saúde da API (health check)."
    },
    {
      "name": "Acessos",
      "description": "Operações relacionadas à verificação, liberação e registro de acessos (pedestres e veículos)."
    },
    {
      "name": "Veiculos",
      "description": "Gerenciamento de dados de veículos, incluindo cadastro, bloqueio, imagem e TAG de acesso."
    },
    {
      "name": "Exaustores",
      "description": "Controle de exaustores das churrasqueiras (ligar, desligar e status)."
    },
    {
      "name": "Consultas",
      "description": "Consultas por CPF, placa e tag de veículo."
    },
    {
      "name": "Controle",
      "description": "Operações de abertura e listagem de portas e portões."
    },
    {
      "name": "Comandos",
      "description": "Historico de comandos executados na API."
    },
    {
      "name": "User Settings",
      "description": "Gerenciamento de configurações de usuário."
    },
    {
      "name": "CIE",
      "description": "Gateway para monitoramento e comandos da central de incendio CIE2500."
    }
  ],
  "paths": {
    "/v2/api/health": {
      "get": {
        "tags": [
          "Monitoramento"
        ],
        "summary": "Verificação de status da API",
        "description": "Retorna o status de funcionamento da API e o ambiente atual.",
        "responses": {
          "200": {
            "description": "API em funcionamento",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseHealth"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/healthcheck": {
      "get": {
        "tags": [
          "Monitoramento"
        ],
        "summary": "Verificação de status da API",
        "description": "Retorna o status de funcionamento da API e o ambiente atual.",
        "responses": {
          "200": {
            "description": "API em funcionamento",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseHealth"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/access/verify": {
      "get": {
        "tags": [
          "Acessos"
        ],
        "summary": "Verificar permissão de acesso",
        "description": "Verifica se uma pessoa ou veículo possui permissão para acessar o condomínio.",
        "parameters": [
          {
            "in": "query",
            "name": "id",
            "required": true,
            "description": "Placa (AAA1234/AAA1A23), CPF (11 dígitos), TAG (10 dígitos) ou ID numérico (1-8 dígitos).",
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "dispositivo",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "sentido",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "foto",
            "required": false,
            "schema": {
              "type": "string",
              "maxLength": 4
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Permissão de acesso verificada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/access/list": {
      "get": {
        "tags": [
          "Acessos"
        ],
        "summary": "Listar últimos acessos do dispositivo",
        "description": "Retorna os últimos acessos registrados para o dispositivo informado (limite padrão 10).",
        "parameters": [
          {
            "in": "query",
            "name": "device",
            "required": true,
            "description": "Número do dispositivo (ex: 9)",
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Quantidade de registros (máx. 50, padrão 10)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/access/register": {
      "post": {
        "tags": [
          "Acessos"
        ],
        "summary": "Registrar novo acesso",
        "description": "Registra um novo evento de acesso ao sistema (entrada ou saida).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "examples": {
                "completo": {
                  "summary": "Completo",
                  "value": {
                    "dispositivo": 9,
                    "pessoa": 91,
                    "classificacao": 10,
                    "classAutorizado": "N",
                    "autorizacaoLanc": "N",
                    "origem": "Y",
                    "seqIdAcesso": 49,
                    "sentido": "E",
                    "quadra": "A",
                    "lote": "124",
                    "panico": "N",
                    "formaAcesso": "TAG",
                    "idAcesso": "0005624566",
                    "seqVeiculo": 745
                  }
                }
              },
              "schema": {
                "type": "object",
                "required": [
                  "dispositivo",
                  "pessoa",
                  "classificacao",
                  "classAutorizado",
                  "autorizacaoLanc",
                  "origem",
                  "seqIdAcesso",
                  "sentido",
                  "quadra",
                  "lote",
                  "panico",
                  "formaAcesso",
                  "idAcesso",
                  "seqVeiculo"
                ],
                "properties": {
                  "dispositivo": {
                    "type": "integer"
                  },
                  "pessoa": {
                    "type": "integer"
                  },
                  "classificacao": {
                    "type": "integer"
                  },
                  "classAutorizado": {
                    "type": "string",
                    "enum": [
                      "S",
                      "N"
                    ]
                  },
                  "autorizacaoLanc": {
                    "type": "string"
                  },
                  "origem": {
                    "type": "string"
                  },
                  "seqIdAcesso": {
                    "type": "integer"
                  },
                  "sentido": {
                    "type": "string",
                    "enum": [
                      "E",
                      "S"
                    ]
                  },
                  "quadra": {
                    "type": "string"
                  },
                  "lote": {
                    "type": "string"
                  },
                  "panico": {
                    "type": "string",
                    "enum": [
                      "S",
                      "N"
                    ]
                  },
                  "formaAcesso": {
                    "type": "string"
                  },
                  "idAcesso": {
                    "type": "string"
                  },
                  "seqVeiculo": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Acesso registrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/vehicles": {
      "get": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Listar veículos",
        "description": "Retorna todos os veículos cadastrados no sistema.",
        "responses": {
          "200": {
            "description": "Lista de veículos retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      },
      "post": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Cadastrar veículo",
        "description": "Cria um novo veículo no sistema.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "examples": {
                "minimo": {
                  "summary": "Mínimo",
                  "value": {
                    "plate": "ABC1234",
                    "brand": "VW",
                    "model": "GOL",
                    "color": "PRATA",
                    "user_seq": 1,
                    "tag": "TAG001"
                  }
                },
                "completo": {
                  "summary": "Completo",
                  "value": {
                    "plate": "ABC1234",
                    "brand": "VW",
                    "model": "GOL",
                    "color": "PRATA",
                    "user_seq": 1,
                    "unit_seq": 10,
                    "tag": "TAG001"
                  }
                }
              },
              "schema": {
                "type": "object",
                "required": [
                  "plate",
                  "brand",
                  "model",
                  "color",
                  "user_seq",
                  "tag"
                ],
                "properties": {
                  "plate": {
                    "type": "string"
                  },
                  "brand": {
                    "type": "string"
                  },
                  "model": {
                    "type": "string"
                  },
                  "color": {
                    "type": "string"
                  },
                  "user_seq": {
                    "type": "integer"
                  },
                  "unit_seq": {
                    "type": "integer"
                  },
                  "tag": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Veículo cadastrado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/vehicles/{id}": {
      "get": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Obter veículo",
        "description": "Retorna os dados de um veículo específico pelo ID.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID do veículo"
          }
        ],
        "responses": {
          "200": {
            "description": "Dados do veículo retornados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/vehicles/{id}/photo": {
      "put": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Atualizar imagem do veículo",
        "description": "Atualiza a imagem do veículo. Requer pelo menos uma das imagens.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "photoTag": {
                    "type": "string",
                    "format": "binary"
                  },
                  "photoVehicle": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Imagem atualizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/vehicles/{id}/access": {
      "patch": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Atualizar acesso do veículo",
        "description": "Atualiza as informações de acesso do veículo.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "examples": {
                "minimo": {
                  "summary": "Mínimo",
                  "value": {
                    "personSequence": 1,
                    "type": "Y",
                    "panic": "N",
                    "id2": "0005629999",
                    "user": "JOHN",
                    "vehicleSequence": 10
                  }
                },
                "completo": {
                  "summary": "Completo",
                  "value": {
                    "personSequence": 1,
                    "type": "Y",
                    "panic": "N",
                    "id2": "0005629999",
                    "useType": "N",
                    "user": "JOHN",
                    "vehicleSequence": 10
                  }
                }
              },
              "schema": {
                "type": "object",
                "required": [
                  "personSequence",
                  "type",
                  "panic",
                  "id2",
                  "user",
                  "vehicleSequence"
                ],
                "properties": {
                  "personSequence": {
                    "type": "integer"
                  },
                  "type": {
                    "type": "string",
                    "example": "Y"
                  },
                  "panic": {
                    "type": "string",
                    "example": "N"
                  },
                  "id2": {
                    "type": "string",
                    "example": "0005629999"
                  },
                  "useType": {
                    "type": "string",
                    "example": "N"
                  },
                  "user": {
                    "type": "string",
                    "example": "JOHN"
                  },
                  "vehicleSequence": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Acesso atualizado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/vehicles/{id}/lock": {
      "put": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Bloquear veículo",
        "description": "Bloqueia o acesso do veículo no sistema.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID do veículo",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Veículo bloqueado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/vehicles/{id}/unlock": {
      "put": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Desbloquear veículo",
        "description": "Desbloqueia o acesso do veículo no sistema.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID do veículo",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Veículo desbloqueado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/vehicles/purge": {
      "post": {
        "tags": [
          "Veiculos"
        ],
        "summary": "Purgar veículos por período",
        "description": "Bloqueia o acesso de veículos com base no período determinado.",
        "parameters": [
          {
            "in": "query",
            "name": "period",
            "required": false,
            "description": "Período em dias",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "example": {
                "period": 30
              },
              "schema": {
                "type": "object",
                "required": [
                  "period"
                ],
                "properties": {
                  "period": {
                    "type": "integer",
                    "description": "Período em dias"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Veículos bloqueados com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/exhausts/on": {
      "post": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Ligar exaustor",
        "description": "Liga o exaustor por pulso no relé. Informe bloco, apartamento e tempo em minutos.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "examples": {
                "minimo": {
                  "summary": "Mínimo",
                  "value": {
                    "bloco": "A",
                    "apartamento": "123"
                  }
                },
                "completo": {
                  "summary": "Completo",
                  "value": {
                    "bloco": "A",
                    "apartamento": "123",
                    "tempo": 10
                  }
                }
              },
              "schema": {
                "type": "object",
                "required": [
                  "bloco",
                  "apartamento"
                ],
                "properties": {
                  "bloco": {
                    "type": "string",
                    "example": "A"
                  },
                  "apartamento": {
                    "type": "string",
                    "example": "123"
                  },
                  "tempo": {
                    "type": "number",
                    "format": "float",
                    "example": 10
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exhaust ligado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": []
      }
    },
    "/v2/api/exhausts/off": {
      "post": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Desligar exaustor",
        "description": "Desliga o exaustor via módulo PWR e religa os demais do grupo.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "bloco": "A",
                "apartamento": "123"
              },
              "schema": {
                "type": "object",
                "required": [
                  "bloco",
                  "apartamento"
                ],
                "properties": {
                  "bloco": {
                    "type": "string",
                    "example": "A"
                  },
                  "apartamento": {
                    "type": "string",
                    "example": "123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Exhaust desligado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": []
      }
    },
    "/v2/api/exhausts/status": {
      "get": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Status geral dos módulos",
        "description": "Retorna o status de todos os módulos e a memória de acionamentos. Se informar id, retorna apenas o exhaust.",
        "parameters": [
          {
            "in": "query",
            "name": "id",
            "required": false,
            "description": "ID do exhaust (ex: A1, B-6, C_3)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/exhausts/status/{id}": {
      "get": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Status de um exaustor por ID",
        "description": "Retorna o status de um exaustor específico pelo ID informado na rota.",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "description": "ID do exaustor (ex: A1, B6, C3)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/exhausts/process/status": {
      "get": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Status do processo de relés",
        "description": "Retorna a memória de relés gerenciada pela API.",
        "responses": {
          "200": {
            "description": "Status retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": []
      }
    },
    "/v2/api/exhausts/config": {
      "post": {
        "tags": [
          "Exaustores"
        ],
        "summary": "Configurar módulo (Backlog)",
        "description": "Envia um comando backlog para o módulo Tasmota (comando já encodado).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "modulo": "1",
                "comando": "Backlog%20PulseTime1%205;%20PulseTime2%205;%20PulseTime3%205;%20PulseTime4%205"
              },
              "schema": {
                "type": "object",
                "required": [
                  "modulo",
                  "comando"
                ],
                "properties": {
                  "modulo": {
                    "type": "string",
                    "example": "1"
                  },
                  "comando": {
                    "type": "string",
                    "example": "Backlog%20PulseTime1%205;%20PulseTime2%205;%20PulseTime3%205;%20PulseTime4%205"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comando enviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": []
      }
    },
    "/v2/api/queries/cpf/{cpf}": {
      "get": {
        "tags": [
          "Consultas"
        ],
        "summary": "Consultar CPF",
        "description": "Valida o CPF e consulta sua existência no banco.",
        "parameters": [
          {
            "in": "path",
            "name": "cpf",
            "required": true,
            "schema": {
              "type": "string",
              "example": "12345678909"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consulta realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/queries/plate/{plate}": {
      "get": {
        "tags": [
          "Consultas"
        ],
        "summary": "Consultar placa",
        "description": "Consulta veículo pela placa.",
        "parameters": [
          {
            "in": "path",
            "name": "plate",
            "required": true,
            "schema": {
              "type": "string",
              "example": "ABC1234"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consulta realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/control/door/list": {
      "get": {
        "tags": [
          "Controle"
        ],
        "summary": "Listar portas disponíveis",
        "description": "Lista portas ativas do controle facial.",
        "responses": {
          "200": {
            "description": "Lista de portas retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/control/door/open": {
      "post": {
        "tags": [
          "Controle"
        ],
        "summary": "Abrir porta",
        "description": "Aciona abertura da porta via dispositivo facial.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "id"
                ],
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "SEQUENCIA da porta"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comando enviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/control/gate/list": {
      "get": {
        "tags": [
          "Controle"
        ],
        "summary": "Listar portões disponíveis",
        "description": "Lista portões ativos para controle via TAG.",
        "responses": {
          "200": {
            "description": "Lista de portões retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": []
      }
    },
    "/v2/api/control/gate/cache/list": {
      "get": {
        "tags": [
          "Controle"
        ],
        "summary": "Listar últimos acessos do cache da TAG",
        "description": "Retorna a listagem dos últimos acessos do cache de TAG a partir do portão informado.",
        "parameters": [
          {
            "in": "query",
            "name": "id",
            "required": true,
            "description": "NUMDISPOSITIVO do portão (ex: 9)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page",
            "required": false,
            "description": "Página desejada (inicia em 1)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "pageSize",
            "required": false,
            "description": "Quantidade de itens por página (máx. 200)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "type",
            "required": false,
            "description": "Tipo de cache (positive, negative, all, whitelist, blacklist)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de acessos retornada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/control/gate/open": {
      "post": {
        "tags": [
          "Controle"
        ],
        "summary": "Abrir portão",
        "description": "Aciona abertura do portão via serviço de controle.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "id"
                ],
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "NUMDISPOSITIVO do portão"
                  },
                  "autoCloseTime": {
                    "type": "integer",
                    "description": "Tempo em segundos para fechamento automático"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comando enviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/control/gate/restart": {
      "post": {
        "tags": [
          "Controle"
        ],
        "summary": "Reiniciar portão",
        "description": "Encaminha a requisição de reinício para o serviço TAG.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "id"
                ],
                "properties": {
                  "id": {
                    "type": "integer",
                    "description": "NUMDISPOSITIVO do portão"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comando de reinício enviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/control/status": {
      "get": {
        "tags": [
          "Controle"
        ],
        "summary": "Status de portas e portões",
        "description": "Retorna o cache do status de portas e portões.",
        "responses": {
          "200": {
            "description": "Status retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/commands/logs": {
      "get": {
        "tags": [
          "Comandos"
        ],
        "summary": "Listar historico de comandos",
        "description": "Retorna os ultimos comandos executados na API.",
        "parameters": [
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Quantidade maxima de itens (padrao 20, maximo 200)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Historico retornado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponseCommandLogs"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/queries/tag/{tag}": {
      "get": {
        "tags": [
          "Consultas"
        ],
        "summary": "Consultar tag",
        "description": "Consulta veículo pela tag (10 dígitos).",
        "parameters": [
          {
            "in": "path",
            "name": "tag",
            "required": true,
            "schema": {
              "type": "string",
              "example": "1234567890"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consulta realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/vehicles/owner/{personSeq}": {
      "get": {
        "summary": "Listar veículos por proprietário",
        "tags": [
          "Veiculos"
        ],
        "description": "Retorna os veículos vinculados ao proprietário informado.",
        "responses": {
          "200": {
            "description": "Lista de veículos retornada com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": [
          {
            "name": "personSeq",
            "in": "path",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ]
      }
    },
    "/v2/api/vehicles/plate/{plate}/details": {
      "get": {
        "summary": "Consultar detalhes de veículo por placa",
        "tags": [
          "Veiculos"
        ],
        "description": "Retorna dados do veículo e tag de acesso vinculada.",
        "responses": {
          "200": {
            "description": "Consulta realizada com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "parameters": [
          {
            "name": "plate",
            "in": "path",
            "schema": {
              "type": "string"
            },
            "required": true
          }
        ]
      }
    },
    "/v2/api/vehicles/plate/lookup": {
      "post": {
        "summary": "Consultar placa em fontes externas",
        "tags": [
          "Veiculos"
        ],
        "description": "Consulta placa em ordem de prioridade por fonte (API1, API2, API3). Cada fonte tenta HTTP configuravel; API1/API2 podem usar scraping como fallback e API3 pode usar WDAPI (pago). O contrato de resposta sempre retorna o status por fonte e dados consolidados por campo.",
        "responses": {
          "200": {
            "description": "Consulta externa realizada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "plate": {
                          "type": "string",
                          "example": "ABC1234"
                        },
                        "sources": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "example": "API1"
                              },
                              "success": {
                                "type": "boolean",
                                "example": true
                              },
                              "durationMs": {
                                "type": "integer",
                                "example": 342
                              },
                              "message": {
                                "type": "string",
                                "example": "Consulta realizada com sucesso."
                              },
                              "data": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                  "brand": {
                                    "type": "string",
                                    "nullable": true,
                                    "example": "TOYOTA"
                                  },
                                  "model": {
                                    "type": "string",
                                    "nullable": true,
                                    "example": "COROLLA XEI"
                                  },
                                  "color": {
                                    "type": "string",
                                    "nullable": true,
                                    "example": "PRATA"
                                  }
                                }
                              }
                            }
                          }
                        }
                      },
                      "consolidated": {
                        "type": "object",
                        "properties": {
                          "brand": {
                            "type": "string",
                            "nullable": true
                          },
                          "model": {
                            "type": "string",
                            "nullable": true
                          },
                          "color": {
                            "type": "string",
                            "nullable": true
                          },
                          "sourceUsedByField": {
                            "type": "object",
                            "properties": {
                              "brand": {
                                "type": "string",
                                "nullable": true
                              },
                              "model": {
                                "type": "string",
                                "nullable": true
                              },
                              "color": {
                                "type": "string",
                                "nullable": true
                              }
                            }
                          }
                        }
                      },
                      "overallSuccess": {
                        "type": "boolean",
                        "example": true
                      }
                    }
                  },
                  "message": {
                    "type": "string",
                    "nullable": true,
                    "example": null
                  },
                  "errors": {
                    "type": "string",
                    "nullable": true,
                    "example": null
                  }
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "plate": {
                    "type": "string",
                    "example": "ABC1234"
                  }
                },
                "type": "object",
                "required": [
                  "plate"
                ]
              }
            }
          },
          "required": true
        },
        "parameters": []
      }
    },
    "/v2/api/vehicles/upsert-by-plate": {
      "post": {
        "summary": "Criar ou atualizar veículo por placa",
        "tags": [
          "Veiculos"
        ],
        "description": "Cria um veículo novo ou atualiza os dados existentes com base na placa informada.",
        "responses": {
          "200": {
            "description": "Veículo salvo com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "plate": {
                    "type": "string",
                    "example": "ABC1234"
                  },
                  "ownerSeq": {
                    "type": "integer",
                    "example": 123
                  },
                  "unitSeq": {
                    "type": "integer",
                    "nullable": true,
                    "example": 456
                  },
                  "brand": {
                    "type": "string",
                    "nullable": true,
                    "example": "TOYOTA"
                  },
                  "model": {
                    "type": "string",
                    "nullable": true,
                    "example": "COROLLA"
                  },
                  "color": {
                    "type": "string",
                    "nullable": true,
                    "example": "PRATA"
                  }
                },
                "type": "object",
                "required": [
                  "plate",
                  "ownerSeq"
                ]
              }
            }
          },
          "required": true
        },
        "parameters": []
      }
    },
    "/v2/api/vehicles/{vehicleSeq}/tag": {
      "post": {
        "description": "Valida permissão e vincula a tag ao veículo.",
        "tags": [
          "Veiculos"
        ],
        "summary": "Vincular ou trocar tag do veículo",
        "responses": {
          "200": {
            "description": "Tag vinculada/trocada com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "409": {
            "$ref": "#/components/responses/Conflict"
          }
        },
        "parameters": [
          {
            "name": "vehicleSeq",
            "in": "path",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "forceSwap": {
                    "type": "boolean"
                  },
                  "cpf": {
                    "type": "string"
                  },
                  "tag": {
                    "type": "string"
                  },
                  "dispositivo": {
                    "type": "integer"
                  }
                },
                "type": "object",
                "required": [
                  "cpf",
                  "tag",
                  "dispositivo"
                ]
              }
            }
          },
          "required": true
        }
      },
      "delete": {
        "summary": "Excluir tag do veículo",
        "tags": [
          "Veiculos"
        ],
        "description": "Remove registro de IDACESSO do veículo e limpa TAGVEICULO.",
        "responses": {
          "200": {
            "description": "Tag removida com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        },
        "parameters": [
          {
            "name": "vehicleSeq",
            "in": "path",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ]
      }
    },
    "/v2/api/vehicles/{vehicleSeq}/unlink-owner": {
      "patch": {
        "summary": "Desvincular proprietário do veículo",
        "tags": [
          "Veiculos"
        ],
        "description": "Remove tag automaticamente e define PROPRIETARIO=0.",
        "responses": {
          "200": {
            "description": "Veículo desvinculado com sucesso",
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        },
        "parameters": [
          {
            "name": "vehicleSeq",
            "in": "path",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ]
      }
    },
    "/v2/api/user-settings/{user}": {
      "get": {
        "tags": [
          "User Settings"
        ],
        "summary": "Obter configurações do usuário",
        "description": "Retorna as configurações do usuário especificado.",
        "parameters": [
          {
            "in": "path",
            "name": "user",
            "required": true,
            "description": "Identificador do usuário",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Configurações obtidas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "put": {
        "tags": [
          "User Settings"
        ],
        "summary": "Atualizar configurações do usuário",
        "description": "Atualiza ou cria as configurações do usuário especificado.",
        "parameters": [
          {
            "in": "path",
            "name": "user",
            "required": true,
            "description": "Identificador do usuário",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    },
                    "description": "Objeto com as configurações do usuário"
                  },
                  "updatedAt": {
                    "type": "number",
                    "description": "Timestamp da atualização (opcional, será definido automaticamente se não fornecido)"
                  }
                },
                "required": [
                  "items"
                ]
              },
              "examples": {
                "exemplo": {
                  "summary": "Exemplo de atualização",
                  "value": {
                    "items": {
                      "theme": "light",
                      "notifications": "enabled"
                    },
                    "updatedAt": 1640995200000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configurações atualizadas com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/v2/api/cie/panel": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Resumo consolidado do painel da central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/status": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Snapshot de status da central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/alarms/active": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Alarmes ativos da central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/logs": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Lista de logs da central",
        "parameters": [
          {
            "in": "query",
            "name": "type",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "alarme",
                "falha",
                "supervisao",
                "operacao",
                "bloqueio"
              ]
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 50
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        }
      }
    },
    "/v2/api/cie/counters/blocks": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Contadores de bloqueio da central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/counters/outputs": {
      "get": {
        "tags": [
          "CIE"
        ],
        "summary": "Contadores de saida da central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/silence-bip": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Silenciar bip interno",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/release-bip": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Reativar bip interno",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/silence-siren": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Silenciar sirene",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/release-siren": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Reativar sirene",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/alarm-general": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Acionar alarme geral",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/restart": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Reiniciar central",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/silence": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Comando de silenciamento",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/release": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Comando de liberacao",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/brigade-siren": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Acionar sirene de brigada",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/delay-siren": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Adiar sirene",
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/block": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Bloquear ou desbloquear item",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "tipoBloqueio",
                  "laco",
                  "numero",
                  "bloquear"
                ],
                "properties": {
                  "tipoBloqueio": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "laco": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "numero": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "bloquear": {
                    "type": "integer",
                    "enum": [
                      0,
                      1
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/v2/api/cie/commands/output": {
      "post": {
        "tags": [
          "CIE"
        ],
        "summary": "Ativar ou desativar saida",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "laco",
                  "numero",
                  "ativo"
                ],
                "properties": {
                  "laco": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "numero": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "ativo": {
                    "type": "integer",
                    "enum": [
                      0,
                      1
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "400": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "409": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          },
          "502": {
            "description": "Falha no gateway CIE",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiErrorResponse"
                }
              }
            },
            "headers": {
              "x-request-id": {
                "$ref": "#/components/headers/RequestIdHeader"
              },
              "x-actor": {
                "$ref": "#/components/headers/ActorHeader"
              }
            }
          }
        },
        "parameters": []
      }
    }
  },
  "servers": [
    {
      "url": "/"
    }
  ],
  "components": {
    "schemas": {
      "ApiResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "additionalProperties": true
          },
          "message": {
            "type": "string",
            "nullable": true,
            "example": null
          },
          "errors": {
            "nullable": true,
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ],
            "example": null
          }
        }
      },
      "ApiErrorResponse": {
        "type": "object",
        "properties": {
          "data": {
            "nullable": true,
            "oneOf": [
              {
                "type": "object"
              },
              {
                "type": "array",
                "items": {
                  "type": "object"
                }
              },
              {
                "type": "string"
              }
            ],
            "example": null
          },
          "message": {
            "type": "string",
            "example": "Erro ao processar requisicao."
          },
          "errors": {
            "$ref": "#/components/schemas/ErrorMeta"
          }
        }
      },
      "HealthData": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "API Funcionando!"
          },
          "environment": {
            "type": "string",
            "example": "development"
          }
        }
      },
      "ApiResponseHealth": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/HealthData"
          },
          "message": {
            "type": "string",
            "nullable": true,
            "example": null
          },
          "errors": {
            "type": "string",
            "nullable": true,
            "example": null
          }
        }
      },
      "CommandLogItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "1739910800000-ab12cd34"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "method": {
            "type": "string",
            "example": "POST"
          },
          "path": {
            "type": "string",
            "example": "/v2/api/control/door/open"
          },
          "command": {
            "type": "string",
            "example": "POST /v2/api/control/door/open"
          },
          "status": {
            "type": "integer",
            "example": 200
          },
          "actor": {
            "type": "string",
            "example": "PORTARIA"
          },
          "ip": {
            "type": "string",
            "nullable": true,
            "example": "192.168.0.10"
          },
          "requestId": {
            "type": "string",
            "nullable": true,
            "example": "f25f63b8-2b89-4fc0-8a2e-7b2e8c7d6f53"
          }
        }
      },
      "CommandLogsData": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "example": 20
          },
          "limit": {
            "type": "integer",
            "example": 20
          },
          "logs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CommandLogItem"
            }
          }
        }
      },
      "ApiResponseCommandLogs": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/CommandLogsData"
          },
          "message": {
            "type": "string",
            "nullable": true,
            "example": null
          },
          "errors": {
            "type": "string",
            "nullable": true,
            "example": null
          }
        }
      },
      "ErrorMeta": {
        "type": "object",
        "properties": {
          "traceId": {
            "type": "string",
            "nullable": true,
            "example": "f25f63b8-2b89-4fc0-8a2e-7b2e8c7d6f53"
          },
          "details": {
            "nullable": true,
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          }
        }
      },
      "CieDeviceClassification": {
        "type": "object",
        "properties": {
          "typeCode": {
            "type": "integer",
            "nullable": true
          },
          "subtypeCode": {
            "type": "integer",
            "nullable": true
          },
          "typeLabel": {
            "type": "string",
            "nullable": true
          },
          "subtypeLabel": {
            "type": "string",
            "nullable": true
          },
          "resolvedLabel": {
            "type": "string",
            "nullable": true
          },
          "source": {
            "type": "string",
            "enum": [
              "codes",
              "name",
              "none"
            ]
          }
        }
      },
      "CieLogItem": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "id": {
            "type": "integer"
          },
          "zone": {
            "type": "integer",
            "nullable": true
          },
          "address": {
            "type": "integer",
            "nullable": true
          },
          "loop": {
            "type": "integer",
            "nullable": true
          },
          "deviceName": {
            "type": "string",
            "nullable": true
          },
          "zoneName": {
            "type": "string",
            "nullable": true
          },
          "deviceClassification": {
            "$ref": "#/components/schemas/CieDeviceClassification",
            "nullable": true
          },
          "eventType": {
            "type": "integer",
            "nullable": true
          },
          "blocked": {
            "type": "boolean",
            "nullable": true
          },
          "occurredAt": {
            "type": "string",
            "format": "date-time"
          },
          "raw": {
            "nullable": true
          },
          "createdAt": {
            "type": "integer"
          }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Requisicao invalida",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "Unauthorized": {
        "description": "Nao autorizado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "Forbidden": {
        "description": "Acesso negado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "NotFound": {
        "description": "Recurso nao encontrado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "Conflict": {
        "description": "Conflito de estado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "UnprocessableEntity": {
        "description": "Entidade nao processavel",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "TooManyRequests": {
        "description": "Muitas requisicoes",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "InternalServerError": {
        "description": "Erro interno do servidor",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "BadGateway": {
        "description": "Falha de gateway",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "ServiceUnavailable": {
        "description": "Servico indisponivel",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      },
      "GatewayTimeout": {
        "description": "Tempo de resposta excedido",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ApiErrorResponse"
            }
          }
        },
        "headers": {
          "x-request-id": {
            "$ref": "#/components/headers/RequestIdHeader"
          },
          "x-actor": {
            "$ref": "#/components/headers/ActorHeader"
          }
        }
      }
    },
    "headers": {
      "RequestIdHeader": {
        "description": "Identificador unico da requisicao para rastreabilidade.",
        "schema": {
          "type": "string",
          "example": "f25f63b8-2b89-4fc0-8a2e-7b2e8c7d6f53"
        }
      },
      "ActorHeader": {
        "description": "Ator identificado para a requisicao (header x-user/x-operator/x-username ou fallback).",
        "schema": {
          "type": "string",
          "example": "PORTARIA"
        }
      }
    }
  }
}
